<!DOCTYPE html>
<html ${htmlAttrs}>
  <head>
    <meta name="color-scheme" content="light dark" />
    ${head}
  </head>
  <body ${bodyAttrs}>
    <script>
      // Add dark / light detection that runs before Vue.js load.
      (function() {
        const colorSchemeMeta = document.querySelector('html head meta[name="color-scheme"]');

        window.__setColorScheme = function(value) {
          window.__colorScheme = value;
          document.documentElement.dataset.scheme = value;
          if (colorSchemeMeta) {
            colorSchemeMeta.content = value;
          }
          try {
            // localStorage.setItem will fail when the user accesses in incognito mode
            localStorage.setItem('colorScheme', value);
          } catch (err) {}
        };
        
        // Select the default color scheme by user system setting
        // const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;
        // __setColorScheme(colorScheme || (supportDarkMode ? 'dark' : 'light'));
        
        let colorScheme = localStorage.getItem('colorScheme');
        __setColorScheme(colorScheme || 'dark');
      })();
    </script>

    ${app}
    ${scripts}
  </body>
</html>
