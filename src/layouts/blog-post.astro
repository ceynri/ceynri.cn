---
import type { CollectionEntry } from 'astro:content';
import { BaseHead, CornerLogo, Footer, FormattedDate } from '~/components';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, date, lastmod, cover_image } = Astro.props;
---

<html lang="zh-CN">
  <head>
    <BaseHead title={title} description={description ?? ''} />
  </head>

  <body>
    <CornerLogo />
    <div class="sm:p-8">
      <main class="mt-16 mx-auto max-w-[50rem] p-[var(--prose-padding)] bg-[var(--prose-bg-color)] transition-[background-color] ease-out rounded-3xl">
        {cover_image
          ? (
          <div class="relative overflow-hidden rounded-t-3xl -mx-[var(--prose-padding)] -mt-[var(--prose-padding)] mb-8 bg-gray-100">
            <img
              class="w-full"
              style={{
                aspectRatio: `${cover_image.width} / ${cover_image.height}`,
              }}
              src={cover_image.src}
              alt="cover image"
            />
            {/* TODO: 标签 */}
            {/* <div class="flex flex-wrap absolute left-12 top-12 space-x-2">
              {Astro.props.tags.map((tag) => (
                <a href={`/blog/tags/${tag}`} class="my-1 text-white text-shadow-lg hover-highlight">
                  <span>#</span>{tag}
                </a>
              ))}
            </div> */}
            <div class="absolute left-4 bottom-8 sm:left-16 sm:bottom-12">
              <h1 class="text-3xl font-bold text-white text-shadow-lg">{title}</h1>
              <div class="mt-3 text-white text-shadow-lg">
                <FormattedDate date={date} />
              </div>
            </div>
          </div>
          )
          : (
            <div class="pt-8 mb-16 flex flex-col items-center">
              <h1 class="text-3xl font-bold">{title}</h1>
              <div class="mt-3">
                <FormattedDate date={date} />
              </div>
            </div>
          )}
        <article class="prose">
          <slot />
          {lastmod && (
            <blockquote>Last modified on <FormattedDate date={lastmod} />.</blockquote>
          )}
        </article>
      </main>
    </div>
    <Footer align="center" />
  </body>
</html>
